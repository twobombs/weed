<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Weed: /notebooks/qrack/weed/include/common/oclengine.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Weed
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">General classical-emulating-quantum development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_efa6663f1c25318189e303760e0a9216.html">notebooks</a></li><li class="navelem"><a class="el" href="dir_e46dda1a0844d0fdf92f4e82a4a00fe6.html">qrack</a></li><li class="navelem"><a class="el" href="dir_147718f0c5f3b2bff883e273867b89e9.html">weed</a></li><li class="navelem"><a class="el" href="dir_ed4756846d2bde20051fbd13851c1ad0.html">include</a></li><li class="navelem"><a class="el" href="dir_fbc948907f9042c9c77ad435e7c17093.html">common</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">oclengine.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="oclengine_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// (C) Daniel Strano and the Qrack contributors 2017-2026. All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Weed is for minimalist AI/ML inference and backprogation in the style of</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Qrack.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Licensed under the GNU Lesser General Public License V3.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// See LICENSE.md in the project root or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// https://www.gnu.org/licenses/lgpl-3.0.en.html for details.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="oclapi_8hpp.html">oclapi.hpp</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#if !ENABLE_OPENCL</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#error OpenCL has not been enabled</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; !defined(__CYGWIN__)</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;direct.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#if ENABLE_SNUCL</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;CL/cl.hpp&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#elif defined(OPENCL_V3)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;CL/opencl.hpp&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#elif defined(__APPLE__)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#define CL_SILENCE_DEPRECATION</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;CL/opencl.hpp&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#elif defined(_WIN32)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;CL/cl.hpp&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;CL/cl2.hpp&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceWeed.html">Weed</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">class </span>OCLDeviceCall;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">class </span>OCLDeviceContext;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">   51</a></span>&#160;<span class="keyword">typedef</span> std::shared_ptr&lt;OCLDeviceContext&gt; <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">   52</a></span>&#160;<span class="keyword">typedef</span> std::vector&lt;cl::Event&gt; <a class="code" href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">EventVec</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">   53</a></span>&#160;<span class="keyword">typedef</span> std::shared_ptr&lt;EventVec&gt; <a class="code" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">EventVecPtr</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="namespaceWeed.html#a361453848a3550886fd54260c88844cc">   54</a></span>&#160;<span class="keyword">typedef</span> std::shared_ptr&lt;cl::Buffer&gt; <a class="code" href="namespaceWeed.html#a361453848a3550886fd54260c88844cc">BufferPtr</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">struct </span><a class="code" href="structWeed_1_1GpuDevice.html">GpuDevice</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="namespaceWeed.html#ae977c8beeffd6e7346c184e609e0c858">   57</a></span>&#160;<span class="keyword">typedef</span> std::shared_ptr&lt;GpuDevice&gt; <a class="code" href="namespaceWeed.html#ae977c8beeffd6e7346c184e609e0c858">GpuDevicePtr</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structWeed_1_1OCLKernelHandle.html">   59</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structWeed_1_1OCLKernelHandle.html">OCLKernelHandle</a> {</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structWeed_1_1OCLKernelHandle.html#af6203d7b687a51016bbb2483e379bc06">   60</a></span>&#160;  <a class="code" href="namespaceWeed.html#a763945c0387a761569473e447b9fa092">OCLAPI</a> <a class="code" href="structWeed_1_1OCLKernelHandle.html#af6203d7b687a51016bbb2483e379bc06">oclapi</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structWeed_1_1OCLKernelHandle.html#aedce83b9e666997d3d5f5f315a238106">   61</a></span>&#160;  std::string <a class="code" href="structWeed_1_1OCLKernelHandle.html#aedce83b9e666997d3d5f5f315a238106">kernelname</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structWeed_1_1OCLKernelHandle.html#a34033168c2c5ad7add490b68734e9ebe">   63</a></span>&#160;  <a class="code" href="structWeed_1_1OCLKernelHandle.html#a34033168c2c5ad7add490b68734e9ebe">OCLKernelHandle</a>(<a class="code" href="namespaceWeed.html#a763945c0387a761569473e447b9fa092">OCLAPI</a> o, std::string kn) : <a class="code" href="structWeed_1_1OCLKernelHandle.html#af6203d7b687a51016bbb2483e379bc06">oclapi</a>(o), <a class="code" href="structWeed_1_1OCLKernelHandle.html#aedce83b9e666997d3d5f5f315a238106">kernelname</a>(kn) {}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;};</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html">   66</a></span>&#160;<span class="keyword">class </span><a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a> {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#ac46cddd2952a56debabf3b7340ede4c7">   68</a></span>&#160;  std::lock_guard&lt;std::mutex&gt; <a class="code" href="classWeed_1_1OCLDeviceCall.html#ac46cddd2952a56debabf3b7340ede4c7">guard</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// A cl::Kernel is unique object which should always be taken by reference, or</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// the OCLDeviceContext will lose ownership.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#aece8b5dacaf03751c1e13140985230b0">   73</a></span>&#160;  cl::Kernel &amp;<a class="code" href="classWeed_1_1OCLDeviceCall.html#aece8b5dacaf03751c1e13140985230b0">call</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#a5fe920c7c1796f71a2115a9914beeecf">   74</a></span>&#160;  <a class="code" href="classWeed_1_1OCLDeviceCall.html#a5fe920c7c1796f71a2115a9914beeecf">OCLDeviceCall</a>(<span class="keyword">const</span> <a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a> &amp;);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#ab3e0c6f7b0b18260b7d5731f0e19a7bf">   77</a></span>&#160;  <a class="code" href="classWeed_1_1OCLDeviceCall.html#ab3e0c6f7b0b18260b7d5731f0e19a7bf">OCLDeviceCall</a>(std::mutex &amp;m, cl::Kernel &amp;c) : <a class="code" href="classWeed_1_1OCLDeviceCall.html#ac46cddd2952a56debabf3b7340ede4c7">guard</a>(m), <a class="code" href="classWeed_1_1OCLDeviceCall.html#aece8b5dacaf03751c1e13140985230b0">call</a>(c) {}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#ae6c8a2cf6ff8ce0d67e0c8982105f516">   79</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classWeed_1_1OCLDeviceContext.html">OCLDeviceContext</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceCall.html#a394a59167e1c826cafaa4171bd49cea0">   82</a></span>&#160;  <a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a> &amp;<a class="code" href="classWeed_1_1OCLDeviceCall.html#a394a59167e1c826cafaa4171bd49cea0">operator=</a>(<span class="keyword">const</span> <a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;};</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html">   85</a></span>&#160;<span class="keyword">class </span><a class="code" href="classWeed_1_1OCLDeviceContext.html">OCLDeviceContext</a> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a08542d09d6e9a2c527314b421c7a19f4">   87</a></span>&#160;  <span class="keyword">const</span> cl::Platform <a class="code" href="classWeed_1_1OCLDeviceContext.html#a08542d09d6e9a2c527314b421c7a19f4">platform</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">   88</a></span>&#160;  <span class="keyword">const</span> cl::Device <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a61152cd2cda4af52cafeabc6bf94b0fc">   89</a></span>&#160;  <span class="keyword">const</span> cl::Context <a class="code" href="classWeed_1_1OCLDeviceContext.html#a61152cd2cda4af52cafeabc6bf94b0fc">context</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a96f4e950d7e66e2fa3284512ba4e53f5">   90</a></span>&#160;  <span class="keyword">const</span> int64_t <a class="code" href="classWeed_1_1OCLDeviceContext.html#a96f4e950d7e66e2fa3284512ba4e53f5">context_id</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#aca2e80cb4fbbbd131f18c8bf9417de31">   91</a></span>&#160;  <span class="keyword">const</span> int64_t <a class="code" href="classWeed_1_1OCLDeviceContext.html#aca2e80cb4fbbbd131f18c8bf9417de31">device_id</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a5a12a675f4f939a4552b57738b8f58a0">   92</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a5a12a675f4f939a4552b57738b8f58a0">is_gpu</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a8661b57b232022347511ff8f7d249fe7">   93</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a8661b57b232022347511ff8f7d249fe7">is_cpu</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a3d49502dae0a6eb2aa2c217af795d0e2">   94</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3d49502dae0a6eb2aa2c217af795d0e2">use_host_mem</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">   95</a></span>&#160;  cl::CommandQueue <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">   96</a></span>&#160;  <a class="code" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">EventVecPtr</a> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">   99</a></span>&#160;  std::mutex <a class="code" href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">waitEventsMutex</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a107b52ed58913f9b52e4c73631ab4885">  100</a></span>&#160;  std::map&lt;OCLAPI, cl::Kernel&gt; <a class="code" href="classWeed_1_1OCLDeviceContext.html#a107b52ed58913f9b52e4c73631ab4885">calls</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a946c062cb84df476deec520d3285778d">  101</a></span>&#160;  std::map&lt;OCLAPI, std::unique_ptr&lt;std::mutex&gt;&gt; <a class="code" href="classWeed_1_1OCLDeviceContext.html#a946c062cb84df476deec520d3285778d">mutexes</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a7d00a464d184ba85cc562a45142af696">  104</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7d00a464d184ba85cc562a45142af696">procElemCount</a> = <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_MAX_COMPUTE_UNITS&gt;();</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#aebdcfbec4eb1aff635554473feae9466">  105</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#aebdcfbec4eb1aff635554473feae9466">maxWorkItems</a> =</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_MAX_WORK_ITEM_SIZES&gt;()[0];</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#adc0c6d775d55b95de7debe62f11848b1">  107</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#adc0c6d775d55b95de7debe62f11848b1">maxWorkGroupSize</a> =</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_MAX_WORK_GROUP_SIZE&gt;();</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">  109</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a> = <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_MAX_MEM_ALLOC_SIZE&gt;();</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a198d2fb573ff2396b61acae09d7b42d5">  110</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a198d2fb573ff2396b61acae09d7b42d5">globalSize</a> = <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_GLOBAL_MEM_SIZE&gt;();</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a5f006db4f36d6ddcee0c14b0cb2730e8">  111</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a5f006db4f36d6ddcee0c14b0cb2730e8">localSize</a> = <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>.getInfo&lt;CL_DEVICE_LOCAL_MEM_SIZE&gt;();</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">  112</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">globalLimit</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">  113</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">preferredSizeMultiple</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">  114</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a9aae255ccb76d57860c8381cb2220c4e">  117</a></span>&#160;  <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9aae255ccb76d57860c8381cb2220c4e">OCLDeviceContext</a>(cl::Platform &amp;p, cl::Device &amp;d, cl::Context &amp;c,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                   int64_t dev_id, int64_t cntxt_id, int64_t <a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                   <span class="keywordtype">bool</span> isGpu, <span class="keywordtype">bool</span> isCpu, <span class="keywordtype">bool</span> useHostMem)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      : <a class="code" href="classWeed_1_1OCLDeviceContext.html#a08542d09d6e9a2c527314b421c7a19f4">platform</a>(p), <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>(d), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a61152cd2cda4af52cafeabc6bf94b0fc">context</a>(c), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a96f4e950d7e66e2fa3284512ba4e53f5">context_id</a>(cntxt_id),</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#aca2e80cb4fbbbd131f18c8bf9417de31">device_id</a>(dev_id), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a5a12a675f4f939a4552b57738b8f58a0">is_gpu</a>(isGpu), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a8661b57b232022347511ff8f7d249fe7">is_cpu</a>(isCpu),</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3d49502dae0a6eb2aa2c217af795d0e2">use_host_mem</a>(useHostMem), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>(new <a class="code" href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">EventVec</a>())</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;#if ENABLE_OCL_MEM_GUARDS</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        ,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">globalLimit</a>((<a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a> &gt;= 0) ? <a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a> : <a class="code" href="classWeed_1_1OCLDeviceContext.html#a198d2fb573ff2396b61acae09d7b42d5">globalSize</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;#else</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        ,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">globalLimit</a>((<a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a> &gt;= 0) ? <a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a> : -1)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;#endif</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">preferredSizeMultiple</a>(0U), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a>(0U) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    cl_int error;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#if ENABLE_OOO_OCL</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#if ENABLE_ENV_VARS</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;DISABLE_OOO_OCL&quot;</span>)) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> = cl::CommandQueue(c, d, 0, &amp;error);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to create OpenCL command queue!&quot;</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> = cl::CommandQueue(c, d, CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                               &amp;error);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> = cl::CommandQueue(c, d, 0, &amp;error);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to create OpenCL command queue!&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> =</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        cl::CommandQueue(c, d, CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE, &amp;error);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> = cl::CommandQueue(c, d, 0, &amp;error);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to create OpenCL command queue!&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">queue</a> = cl::CommandQueue(c, d, 0, &amp;error);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (error != CL_SUCCESS) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to create OpenCL command queue!&quot;</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a33537111387f9728433911fcf5b9a28c">  168</a></span>&#160;  <a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a33537111387f9728433911fcf5b9a28c">Reserve</a>(<a class="code" href="namespaceWeed.html#a763945c0387a761569473e447b9fa092">OCLAPI</a> call) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceCall.html">OCLDeviceCall</a>(*(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a946c062cb84df476deec520d3285778d">mutexes</a>[call]), <a class="code" href="classWeed_1_1OCLDeviceContext.html#a107b52ed58913f9b52e4c73631ab4885">calls</a>[call]);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a4bff5c6f73f52a6d6ce2ae290712608c">  172</a></span>&#160;  <a class="code" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">EventVecPtr</a> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a4bff5c6f73f52a6d6ce2ae290712608c">ResetWaitEvents</a>() {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">waitEventsMutex</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">EventVecPtr</a> waitVec = std::move(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a> = <a class="code" href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">EventVecPtr</a>(<span class="keyword">new</span> <a class="code" href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">EventVec</a>());</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> waitVec;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#ab6d3857268d2754c88ca4ed8ce6855bb">  179</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Fn&gt; <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab6d3857268d2754c88ca4ed8ce6855bb">EmplaceEvent</a>(Fn fn) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">waitEventsMutex</a>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>-&gt;emplace_back();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    fn(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>-&gt;back());</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#aa2cd2d2ec6cd4f66d0582f0a2ba8c168">  185</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa2cd2d2ec6cd4f66d0582f0a2ba8c168">WaitOnAllEvents</a>() {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">waitEventsMutex</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>.get())-&gt;size()) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      cl::Event::waitForEvents((<span class="keyword">const</span> <a class="code" href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">EventVec</a> &amp;)*(<a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>.get()));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">wait_events</a>-&gt;clear();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a030dc2ca1097b5e83f9b16f447461836">  193</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a030dc2ca1097b5e83f9b16f447461836">GetPreferredSizeMultiple</a>() {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">preferredSizeMultiple</a></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;               ? <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">preferredSizeMultiple</a></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;               : <a class="code" href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">preferredSizeMultiple</a> =</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                     <a class="code" href="classWeed_1_1OCLDeviceContext.html#a107b52ed58913f9b52e4c73631ab4885">calls</a>[<a class="code" href="namespaceWeed.html#a763945c0387a761569473e447b9fa092aee6803dd25938d3b1265644c0d214880">OCL_API_ADD_REAL</a>]</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                         .getWorkGroupInfo&lt;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                             CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE&gt;(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                             <a class="code" href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">device</a>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a019ad5cb85514078961708d0a4cc13fe">  203</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a019ad5cb85514078961708d0a4cc13fe">GetPreferredConcurrency</a>() {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a>) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">int</span> hybridOffset = 3U;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#if ENABLE_ENV_VARS</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;WEED_GPU_OFFSET_POW&quot;</span>)) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      hybridOffset = std::stoi(std::string(getenv(<span class="stringliteral">&quot;WEED_GPU_OFFSET_POW&quot;</span>)));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> pc = <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7d00a464d184ba85cc562a45142af696">procElemCount</a> * <a class="code" href="classWeed_1_1OCLDeviceContext.html#a030dc2ca1097b5e83f9b16f447461836">GetPreferredSizeMultiple</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> = 1U;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> &lt; pc) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> &lt;&lt;= 1U;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> = hybridOffset &gt; 0</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               ? (<a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> &lt;&lt; hybridOffset)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                               : (<a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> &gt;&gt; -hybridOffset);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> &lt; 1U) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a> = 1U;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">preferredConcurrency</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#aaf73628f7562bbac01f80d67068d86ad">  230</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#aaf73628f7562bbac01f80d67068d86ad">GetProcElementCount</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7d00a464d184ba85cc562a45142af696">procElemCount</a>; }</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a2f9e18db81636aac7ea77f0665a79f75">  231</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a2f9e18db81636aac7ea77f0665a79f75">GetMaxWorkItems</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#aebdcfbec4eb1aff635554473feae9466">maxWorkItems</a>; }</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a30b21b6cd0d368e4c1757ab5b5097623">  232</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a30b21b6cd0d368e4c1757ab5b5097623">GetMaxWorkGroupSize</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#adc0c6d775d55b95de7debe62f11848b1">maxWorkGroupSize</a>; }</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a16160f9b3e63f502dfa88b954b792a41">  233</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a16160f9b3e63f502dfa88b954b792a41">GetMaxAlloc</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">maxAlloc</a>; }</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a4b4eaaf4377f5d0f0a93e6499077ca0c">  234</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a4b4eaaf4377f5d0f0a93e6499077ca0c">GetGlobalSize</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a198d2fb573ff2396b61acae09d7b42d5">globalSize</a>; }</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#add42d5afb3bf6780180e937e36bd5206">  235</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#add42d5afb3bf6780180e937e36bd5206">GetLocalSize</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a5f006db4f36d6ddcee0c14b0cb2730e8">localSize</a>; }</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#afa15198e367fbfee368101fdf4331516">  236</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#afa15198e367fbfee368101fdf4331516">GetGlobalAllocLimit</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">globalLimit</a>; }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLDeviceContext.html#a1ed096aabeedff740ce7b48a003e59a2">  238</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;};</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structWeed_1_1InitOClResult.html">  241</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structWeed_1_1InitOClResult.html">InitOClResult</a> {</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="structWeed_1_1InitOClResult.html#a3f47ccf3c011eb5e9e390c834beb5664">  242</a></span>&#160;  std::vector&lt;DeviceContextPtr&gt; <a class="code" href="structWeed_1_1InitOClResult.html#a3f47ccf3c011eb5e9e390c834beb5664">all_dev_contexts</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="structWeed_1_1InitOClResult.html#ab27fe2e85914fdc203a070c754ad9324">  243</a></span>&#160;  <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> <a class="code" href="structWeed_1_1InitOClResult.html#ab27fe2e85914fdc203a070c754ad9324">default_dev_context</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structWeed_1_1InitOClResult.html#a5af328587b99a568586c90bf2ec5f89e">  245</a></span>&#160;  <a class="code" href="structWeed_1_1InitOClResult.html#a5af328587b99a568586c90bf2ec5f89e">InitOClResult</a>() : <a class="code" href="structWeed_1_1InitOClResult.html#a3f47ccf3c011eb5e9e390c834beb5664">all_dev_contexts</a>(), <a class="code" href="structWeed_1_1InitOClResult.html#ab27fe2e85914fdc203a070c754ad9324">default_dev_context</a>{nullptr} {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Intentionally left blank</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="structWeed_1_1InitOClResult.html#a685837bca684676d6c473cbc18d96600">  249</a></span>&#160;  <a class="code" href="structWeed_1_1InitOClResult.html#a685837bca684676d6c473cbc18d96600">InitOClResult</a>(std::vector&lt;DeviceContextPtr&gt; adc, <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> ddc)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      : <a class="code" href="structWeed_1_1InitOClResult.html#a3f47ccf3c011eb5e9e390c834beb5664">all_dev_contexts</a>(adc), <a class="code" href="structWeed_1_1InitOClResult.html#ab27fe2e85914fdc203a070c754ad9324">default_dev_context</a>(ddc) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// Intentionally left blank</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;};</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html">  256</a></span>&#160;<span class="keyword">class </span><a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// See https://stackoverflow.com/questions/1008019/c-singleton-design-pattern</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#aacb633f61518be1805221ca78c488c84">  261</a></span>&#160;<span class="comment"></span>  <span class="keyword">static</span> <a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a> &amp;<a class="code" href="classWeed_1_1OCLEngine.html#aacb633f61518be1805221ca78c488c84">Instance</a>() {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">static</span> <a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a> instance;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> instance;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#af90a483acd03c5dd5f9a451298e1fbb7">  266</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="classWeed_1_1OCLEngine.html#af90a483acd03c5dd5f9a451298e1fbb7">GetDefaultBinaryPath</a>() {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#if ENABLE_ENV_VARS</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (getenv(<span class="stringliteral">&quot;WEED_OCL_PATH&quot;</span>)) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      std::string toRet = std::string(getenv(<span class="stringliteral">&quot;WEED_OCL_PATH&quot;</span>));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span> ((toRet.back() != <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (toRet.back() != <span class="charliteral">&#39;\\&#39;</span>)) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; !defined(__CYGWIN__)</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        toRet += <span class="stringliteral">&quot;\\&quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        toRet += <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> toRet;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; !defined(__CYGWIN__)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> std::string(getenv(<span class="stringliteral">&quot;HOMEDRIVE&quot;</span>) ? getenv(<span class="stringliteral">&quot;HOMEDRIVE&quot;</span>) : <span class="stringliteral">&quot;&quot;</span>) +</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;           std::string(getenv(<span class="stringliteral">&quot;HOMEPATH&quot;</span>) ? getenv(<span class="stringliteral">&quot;HOMEPATH&quot;</span>) : <span class="stringliteral">&quot;&quot;</span>) +</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;           <span class="stringliteral">&quot;\\.weed\\&quot;</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> std::string(getenv(<span class="stringliteral">&quot;HOME&quot;</span>) ? getenv(<span class="stringliteral">&quot;HOME&quot;</span>) : <span class="stringliteral">&quot;&quot;</span>) + <span class="stringliteral">&quot;/.weed/&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keyword">static</span> <a class="code" href="structWeed_1_1InitOClResult.html">InitOClResult</a> <a class="code" href="classWeed_1_1OCLEngine.html#a305b5b8b0c73d4e1f0a5bdc1725cdbf0">InitOCL</a>(<span class="keywordtype">bool</span> buildFromSource = <span class="keyword">false</span>,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                               <span class="keywordtype">bool</span> saveBinaries = <span class="keyword">false</span>,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                               std::string home = <span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                               std::vector&lt;int64_t&gt; maxAllocVec = {-1});</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> <a class="code" href="classWeed_1_1OCLEngine.html#a56950d625e01440628ad240a838ee36a">GetDeviceContextPtr</a>(<span class="keyword">const</span> int64_t &amp;dev = -1);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  std::vector&lt;DeviceContextPtr&gt; <a class="code" href="classWeed_1_1OCLEngine.html#a3d940af1988333cfdec102a942a6f0d8">GetDeviceContextPtrVector</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLEngine.html#aace5791e70369c69c57ef203d74e4d70">SetDeviceContextPtrVector</a>(std::vector&lt;DeviceContextPtr&gt; vec,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                 <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> dcp = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a1477ab88bed9fd349d7ddf7cda7e283b">  312</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classWeed_1_1OCLEngine.html#a1477ab88bed9fd349d7ddf7cda7e283b">GetDeviceCount</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#a1e47b2fe39da6a0e2440320cbb9debd4">all_device_contexts</a>.size(); }</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">  314</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">GetDefaultDeviceID</a>() { <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#af230aef9b246ac1d64c864354d5c7b68">default_device_context</a>-&gt;device_id; }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLEngine.html#ac3f293b192d1ed1adf2895bab108e371">SetDefaultDeviceContext</a>(<a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> dcp);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="namespaceWeed.html#ae977c8beeffd6e7346c184e609e0c858">GpuDevicePtr</a> <a class="code" href="classWeed_1_1OCLEngine.html#aa94d5413f3f1585d42ba00f11e139168">GetWeedDevice</a>(int64_t did = -1);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#acc86091fae9dbd858596ffec35c6266c">  321</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLEngine.html#acc86091fae9dbd858596ffec35c6266c">GetActiveAllocSize</a>(<span class="keyword">const</span> int64_t &amp;dev) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (dev &gt; ((int64_t)<a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>.size())) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="stringliteral">&quot;OCLEngine::GetActiveAllocSize device ID is too high!&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> (dev &lt; 0) ? <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[<a class="code" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">GetDefaultDeviceID</a>()]</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                     : <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[(size_t)dev];</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a0e8df9eb4d5460b92832dcfa5a837ccc">  330</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLEngine.html#a0e8df9eb4d5460b92832dcfa5a837ccc">AddToActiveAllocSize</a>(<span class="keyword">const</span> int64_t &amp;dev, <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (dev &gt; ((int64_t)<a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>.size())) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          <span class="stringliteral">&quot;OCLEngine::GetActiveAllocSize device ID is too high!&quot;</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> lDev = (dev &lt; 0) ? <a class="code" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">GetDefaultDeviceID</a>() : dev;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (size == 0) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev];</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">allocMutex</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev] += size;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev];</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a1e9b5b2721da970d6b42310f20bf4561">  347</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classWeed_1_1OCLEngine.html#a1e9b5b2721da970d6b42310f20bf4561">SubtractFromActiveAllocSize</a>(<span class="keyword">const</span> int64_t &amp;dev, <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (dev &gt; ((int64_t)<a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>.size())) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <span class="stringliteral">&quot;OCLEngine::GetActiveAllocSize device ID is too high!&quot;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> lDev = (dev &lt; 0) ? <a class="code" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">GetDefaultDeviceID</a>() : dev;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (size == 0) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">allocMutex</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (size &lt; <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev]) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev] -= size;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev] = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev];</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a49c41b49d0ae046a98a8f6f226160752">  368</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLEngine.html#a49c41b49d0ae046a98a8f6f226160752">ResetActiveAllocSize</a>(<span class="keyword">const</span> int64_t &amp;dev) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (dev &gt; ((int64_t)<a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>.size())) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <span class="stringliteral">&quot;OCLEngine::GetActiveAllocSize device ID is too high!&quot;</span>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> lDev = (dev &lt; 0) ? <a class="code" href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">GetDefaultDeviceID</a>() : dev;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">allocMutex</a>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// User code should catch std::bad_alloc and reset:</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>[lDev] = 0;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a4d0d4a8c5b6ef3e804c10238961021bb">  379</a></span>&#160;  <a class="code" href="classWeed_1_1OCLEngine.html#a4d0d4a8c5b6ef3e804c10238961021bb">OCLEngine</a>(<a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a> <span class="keyword">const</span> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a3f5b3b2847345173d8f3373994a2940e">  380</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLEngine.html#a3f5b3b2847345173d8f3373994a2940e">operator=</a>(<a class="code" href="classWeed_1_1OCLEngine.html">OCLEngine</a> <span class="keyword">const</span> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a26212e1da80aa978fae3f6f4bb510257">  383</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;OCLKernelHandle&gt; <a class="code" href="classWeed_1_1OCLEngine.html#a26212e1da80aa978fae3f6f4bb510257">kernelHandles</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#aa5023251be9577ca3783f5a5919d53d0">  384</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classWeed_1_1OCLEngine.html#aa5023251be9577ca3783f5a5919d53d0">binary_file_prefix</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#ab23763d37037d7d9b55d6fd45b7448b8">  385</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="classWeed_1_1OCLEngine.html#ab23763d37037d7d9b55d6fd45b7448b8">binary_file_ext</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">  387</a></span>&#160;  std::vector&lt;size_t&gt; <a class="code" href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">activeAllocSizes</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a9dadfc4a958848122611909d974183dc">  388</a></span>&#160;  std::vector&lt;int64_t&gt; <a class="code" href="classWeed_1_1OCLEngine.html#a9dadfc4a958848122611909d974183dc">maxActiveAllocSizes</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">  389</a></span>&#160;  std::mutex <a class="code" href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">allocMutex</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#a1e47b2fe39da6a0e2440320cbb9debd4">  390</a></span>&#160;  std::vector&lt;DeviceContextPtr&gt; <a class="code" href="classWeed_1_1OCLEngine.html#a1e47b2fe39da6a0e2440320cbb9debd4">all_device_contexts</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#af230aef9b246ac1d64c864354d5c7b68">  391</a></span>&#160;  <a class="code" href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">DeviceContextPtr</a> <a class="code" href="classWeed_1_1OCLEngine.html#af230aef9b246ac1d64c864354d5c7b68">default_device_context</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classWeed_1_1OCLEngine.html#ab29b8ae7da995a16985e45a3be263010">  392</a></span>&#160;  std::map&lt;int64_t, GpuDevicePtr&gt; <a class="code" href="classWeed_1_1OCLEngine.html#ab29b8ae7da995a16985e45a3be263010">weed_gpu_devices</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classWeed_1_1OCLEngine.html#ac9975cad91df2e6b894fc8d370b59c36">OCLEngine</a>(); <span class="comment">// Private so that it can  not be called</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keyword">static</span> cl::Program <a class="code" href="classWeed_1_1OCLEngine.html#acd47d9f4fe254e7e7400f3ddac078ab0">MakeProgram</a>(<span class="keywordtype">bool</span> buildFromSource, std::string path,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                 std::shared_ptr&lt;OCLDeviceContext&gt; devCntxt);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classWeed_1_1OCLEngine.html#a23f62d85663f1d9e551b99cbabc351f0">SaveBinary</a>(cl::Program program, std::string path,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                         std::string fileName);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;};</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;} <span class="comment">// namespace Weed</span></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html">Weed::OCLDeviceCall</a></div><div class="ttdef"><b>Definition:</b> oclengine.hpp:66</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html_a394a59167e1c826cafaa4171bd49cea0"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html#a394a59167e1c826cafaa4171bd49cea0">Weed::OCLDeviceCall::operator=</a></div><div class="ttdeci">OCLDeviceCall &amp; operator=(const OCLDeviceCall &amp;)=delete</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html_a5fe920c7c1796f71a2115a9914beeecf"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html#a5fe920c7c1796f71a2115a9914beeecf">Weed::OCLDeviceCall::OCLDeviceCall</a></div><div class="ttdeci">OCLDeviceCall(const OCLDeviceCall &amp;)</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html_ab3e0c6f7b0b18260b7d5731f0e19a7bf"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html#ab3e0c6f7b0b18260b7d5731f0e19a7bf">Weed::OCLDeviceCall::OCLDeviceCall</a></div><div class="ttdeci">OCLDeviceCall(std::mutex &amp;m, cl::Kernel &amp;c)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:77</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html_ac46cddd2952a56debabf3b7340ede4c7"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html#ac46cddd2952a56debabf3b7340ede4c7">Weed::OCLDeviceCall::guard</a></div><div class="ttdeci">std::lock_guard&lt; std::mutex &gt; guard</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:68</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceCall_html_aece8b5dacaf03751c1e13140985230b0"><div class="ttname"><a href="classWeed_1_1OCLDeviceCall.html#aece8b5dacaf03751c1e13140985230b0">Weed::OCLDeviceCall::call</a></div><div class="ttdeci">cl::Kernel &amp; call</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:73</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html">Weed::OCLDeviceContext</a></div><div class="ttdef"><b>Definition:</b> oclengine.hpp:85</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a019ad5cb85514078961708d0a4cc13fe"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a019ad5cb85514078961708d0a4cc13fe">Weed::OCLDeviceContext::GetPreferredConcurrency</a></div><div class="ttdeci">size_t GetPreferredConcurrency()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:203</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a030dc2ca1097b5e83f9b16f447461836"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a030dc2ca1097b5e83f9b16f447461836">Weed::OCLDeviceContext::GetPreferredSizeMultiple</a></div><div class="ttdeci">size_t GetPreferredSizeMultiple()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:193</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a08542d09d6e9a2c527314b421c7a19f4"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a08542d09d6e9a2c527314b421c7a19f4">Weed::OCLDeviceContext::platform</a></div><div class="ttdeci">const cl::Platform platform</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:87</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a107b52ed58913f9b52e4c73631ab4885"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a107b52ed58913f9b52e4c73631ab4885">Weed::OCLDeviceContext::calls</a></div><div class="ttdeci">std::map&lt; OCLAPI, cl::Kernel &gt; calls</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:100</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a16160f9b3e63f502dfa88b954b792a41"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a16160f9b3e63f502dfa88b954b792a41">Weed::OCLDeviceContext::GetMaxAlloc</a></div><div class="ttdeci">size_t GetMaxAlloc()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:233</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a198d2fb573ff2396b61acae09d7b42d5"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a198d2fb573ff2396b61acae09d7b42d5">Weed::OCLDeviceContext::globalSize</a></div><div class="ttdeci">const size_t globalSize</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:110</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a2f9e18db81636aac7ea77f0665a79f75"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a2f9e18db81636aac7ea77f0665a79f75">Weed::OCLDeviceContext::GetMaxWorkItems</a></div><div class="ttdeci">size_t GetMaxWorkItems()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:231</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a30b21b6cd0d368e4c1757ab5b5097623"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a30b21b6cd0d368e4c1757ab5b5097623">Weed::OCLDeviceContext::GetMaxWorkGroupSize</a></div><div class="ttdeci">size_t GetMaxWorkGroupSize()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:232</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a33537111387f9728433911fcf5b9a28c"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a33537111387f9728433911fcf5b9a28c">Weed::OCLDeviceContext::Reserve</a></div><div class="ttdeci">OCLDeviceCall Reserve(OCLAPI call)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:168</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a3bc7f1d54448152e011460a38a5133c6"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a3bc7f1d54448152e011460a38a5133c6">Weed::OCLDeviceContext::queue</a></div><div class="ttdeci">cl::CommandQueue queue</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:95</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a3d49502dae0a6eb2aa2c217af795d0e2"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a3d49502dae0a6eb2aa2c217af795d0e2">Weed::OCLDeviceContext::use_host_mem</a></div><div class="ttdeci">const bool use_host_mem</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:94</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a3edf0adad1f5f636f0d4b3382b4e3041"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a3edf0adad1f5f636f0d4b3382b4e3041">Weed::OCLDeviceContext::wait_events</a></div><div class="ttdeci">EventVecPtr wait_events</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:96</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a4b4eaaf4377f5d0f0a93e6499077ca0c"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a4b4eaaf4377f5d0f0a93e6499077ca0c">Weed::OCLDeviceContext::GetGlobalSize</a></div><div class="ttdeci">size_t GetGlobalSize()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:234</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a4bff5c6f73f52a6d6ce2ae290712608c"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a4bff5c6f73f52a6d6ce2ae290712608c">Weed::OCLDeviceContext::ResetWaitEvents</a></div><div class="ttdeci">EventVecPtr ResetWaitEvents()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:172</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a5a12a675f4f939a4552b57738b8f58a0"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a5a12a675f4f939a4552b57738b8f58a0">Weed::OCLDeviceContext::is_gpu</a></div><div class="ttdeci">const bool is_gpu</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:92</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a5f006db4f36d6ddcee0c14b0cb2730e8"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a5f006db4f36d6ddcee0c14b0cb2730e8">Weed::OCLDeviceContext::localSize</a></div><div class="ttdeci">const size_t localSize</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:111</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a61152cd2cda4af52cafeabc6bf94b0fc"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a61152cd2cda4af52cafeabc6bf94b0fc">Weed::OCLDeviceContext::context</a></div><div class="ttdeci">const cl::Context context</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:89</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a7523c7e77cf9b484e347b0ee0f424e8f"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a7523c7e77cf9b484e347b0ee0f424e8f">Weed::OCLDeviceContext::globalLimit</a></div><div class="ttdeci">size_t globalLimit</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:112</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a7d00a464d184ba85cc562a45142af696"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a7d00a464d184ba85cc562a45142af696">Weed::OCLDeviceContext::procElemCount</a></div><div class="ttdeci">const size_t procElemCount</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:104</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a802af64c869d14177cd974f059ad510c"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a802af64c869d14177cd974f059ad510c">Weed::OCLDeviceContext::maxAlloc</a></div><div class="ttdeci">const size_t maxAlloc</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:109</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a8661b57b232022347511ff8f7d249fe7"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a8661b57b232022347511ff8f7d249fe7">Weed::OCLDeviceContext::is_cpu</a></div><div class="ttdeci">const bool is_cpu</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:93</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a8b46935e28c9054f5ba4805a6240b28d"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a8b46935e28c9054f5ba4805a6240b28d">Weed::OCLDeviceContext::waitEventsMutex</a></div><div class="ttdeci">std::mutex waitEventsMutex</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:99</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a946c062cb84df476deec520d3285778d"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a946c062cb84df476deec520d3285778d">Weed::OCLDeviceContext::mutexes</a></div><div class="ttdeci">std::map&lt; OCLAPI, std::unique_ptr&lt; std::mutex &gt; &gt; mutexes</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:101</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a96f4e950d7e66e2fa3284512ba4e53f5"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a96f4e950d7e66e2fa3284512ba4e53f5">Weed::OCLDeviceContext::context_id</a></div><div class="ttdeci">const int64_t context_id</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:90</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a9aae255ccb76d57860c8381cb2220c4e"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a9aae255ccb76d57860c8381cb2220c4e">Weed::OCLDeviceContext::OCLDeviceContext</a></div><div class="ttdeci">OCLDeviceContext(cl::Platform &amp;p, cl::Device &amp;d, cl::Context &amp;c, int64_t dev_id, int64_t cntxt_id, int64_t maxAlloc, bool isGpu, bool isCpu, bool useHostMem)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:117</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_a9ea9b7576fd766e4ebcbe8adc7e344c9"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#a9ea9b7576fd766e4ebcbe8adc7e344c9">Weed::OCLDeviceContext::preferredConcurrency</a></div><div class="ttdeci">size_t preferredConcurrency</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:114</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_aa2cd2d2ec6cd4f66d0582f0a2ba8c168"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#aa2cd2d2ec6cd4f66d0582f0a2ba8c168">Weed::OCLDeviceContext::WaitOnAllEvents</a></div><div class="ttdeci">void WaitOnAllEvents()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:185</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_aa79ce85e19b91a7f271ce467f0814ba3"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#aa79ce85e19b91a7f271ce467f0814ba3">Weed::OCLDeviceContext::device</a></div><div class="ttdeci">const cl::Device device</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:88</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_aaf73628f7562bbac01f80d67068d86ad"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#aaf73628f7562bbac01f80d67068d86ad">Weed::OCLDeviceContext::GetProcElementCount</a></div><div class="ttdeci">size_t GetProcElementCount()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:230</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_ab6d3857268d2754c88ca4ed8ce6855bb"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#ab6d3857268d2754c88ca4ed8ce6855bb">Weed::OCLDeviceContext::EmplaceEvent</a></div><div class="ttdeci">void EmplaceEvent(Fn fn)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:179</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_ab94d8829e4c54a86716acca7ec5017e5"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#ab94d8829e4c54a86716acca7ec5017e5">Weed::OCLDeviceContext::preferredSizeMultiple</a></div><div class="ttdeci">size_t preferredSizeMultiple</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:113</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_aca2e80cb4fbbbd131f18c8bf9417de31"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#aca2e80cb4fbbbd131f18c8bf9417de31">Weed::OCLDeviceContext::device_id</a></div><div class="ttdeci">const int64_t device_id</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:91</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_adc0c6d775d55b95de7debe62f11848b1"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#adc0c6d775d55b95de7debe62f11848b1">Weed::OCLDeviceContext::maxWorkGroupSize</a></div><div class="ttdeci">const size_t maxWorkGroupSize</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:107</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_add42d5afb3bf6780180e937e36bd5206"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#add42d5afb3bf6780180e937e36bd5206">Weed::OCLDeviceContext::GetLocalSize</a></div><div class="ttdeci">size_t GetLocalSize()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:235</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_aebdcfbec4eb1aff635554473feae9466"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#aebdcfbec4eb1aff635554473feae9466">Weed::OCLDeviceContext::maxWorkItems</a></div><div class="ttdeci">const size_t maxWorkItems</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:105</div></div>
<div class="ttc" id="aclassWeed_1_1OCLDeviceContext_html_afa15198e367fbfee368101fdf4331516"><div class="ttname"><a href="classWeed_1_1OCLDeviceContext.html#afa15198e367fbfee368101fdf4331516">Weed::OCLDeviceContext::GetGlobalAllocLimit</a></div><div class="ttdeci">size_t GetGlobalAllocLimit()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:236</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html"><div class="ttname"><a href="classWeed_1_1OCLEngine.html">Weed::OCLEngine</a></div><div class="ttdoc">&quot;Weed::OCLEngine&quot; manages the single OpenCL context.</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:256</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a0e8df9eb4d5460b92832dcfa5a837ccc"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a0e8df9eb4d5460b92832dcfa5a837ccc">Weed::OCLEngine::AddToActiveAllocSize</a></div><div class="ttdeci">size_t AddToActiveAllocSize(const int64_t &amp;dev, size_t size)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:330</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a1477ab88bed9fd349d7ddf7cda7e283b"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a1477ab88bed9fd349d7ddf7cda7e283b">Weed::OCLEngine::GetDeviceCount</a></div><div class="ttdeci">int GetDeviceCount()</div><div class="ttdoc">Get the count of devices in the current list.</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:312</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a1e47b2fe39da6a0e2440320cbb9debd4"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a1e47b2fe39da6a0e2440320cbb9debd4">Weed::OCLEngine::all_device_contexts</a></div><div class="ttdeci">std::vector&lt; DeviceContextPtr &gt; all_device_contexts</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:390</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a1e9b5b2721da970d6b42310f20bf4561"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a1e9b5b2721da970d6b42310f20bf4561">Weed::OCLEngine::SubtractFromActiveAllocSize</a></div><div class="ttdeci">size_t SubtractFromActiveAllocSize(const int64_t &amp;dev, size_t size)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:347</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a23f62d85663f1d9e551b99cbabc351f0"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a23f62d85663f1d9e551b99cbabc351f0">Weed::OCLEngine::SaveBinary</a></div><div class="ttdeci">static void SaveBinary(cl::Program program, std::string path, std::string fileName)</div><div class="ttdoc">Save the program binary:</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:272</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a26212e1da80aa978fae3f6f4bb510257"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a26212e1da80aa978fae3f6f4bb510257">Weed::OCLEngine::kernelHandles</a></div><div class="ttdeci">static const std::vector&lt; OCLKernelHandle &gt; kernelHandles</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:383</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a305b5b8b0c73d4e1f0a5bdc1725cdbf0"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a305b5b8b0c73d4e1f0a5bdc1725cdbf0">Weed::OCLEngine::InitOCL</a></div><div class="ttdeci">static InitOClResult InitOCL(bool buildFromSource=false, bool saveBinaries=false, std::string home=&quot;*&quot;, std::vector&lt; int64_t &gt; maxAllocVec={-1})</div><div class="ttdoc">Initialize the OCL environment, with the option to save the generated binaries.</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:311</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a3d940af1988333cfdec102a942a6f0d8"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a3d940af1988333cfdec102a942a6f0d8">Weed::OCLEngine::GetDeviceContextPtrVector</a></div><div class="ttdeci">std::vector&lt; DeviceContextPtr &gt; GetDeviceContextPtrVector()</div><div class="ttdoc">Get the list of all available devices (and their supporting objects).</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:149</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a3f5b3b2847345173d8f3373994a2940e"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a3f5b3b2847345173d8f3373994a2940e">Weed::OCLEngine::operator=</a></div><div class="ttdeci">void operator=(OCLEngine const &amp;)=delete</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a49c41b49d0ae046a98a8f6f226160752"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a49c41b49d0ae046a98a8f6f226160752">Weed::OCLEngine::ResetActiveAllocSize</a></div><div class="ttdeci">void ResetActiveAllocSize(const int64_t &amp;dev)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:368</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a4d0d4a8c5b6ef3e804c10238961021bb"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a4d0d4a8c5b6ef3e804c10238961021bb">Weed::OCLEngine::OCLEngine</a></div><div class="ttdeci">OCLEngine(OCLEngine const &amp;)=delete</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a56950d625e01440628ad240a838ee36a"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a56950d625e01440628ad240a838ee36a">Weed::OCLEngine::GetDeviceContextPtr</a></div><div class="ttdeci">DeviceContextPtr GetDeviceContextPtr(const int64_t &amp;dev=-1)</div><div class="ttdoc">Get a pointer one of the available OpenCL contexts, by its index in the list of all contexts.</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:54</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_a9dadfc4a958848122611909d974183dc"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#a9dadfc4a958848122611909d974183dc">Weed::OCLEngine::maxActiveAllocSizes</a></div><div class="ttdeci">std::vector&lt; int64_t &gt; maxActiveAllocSizes</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:388</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aa5023251be9577ca3783f5a5919d53d0"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aa5023251be9577ca3783f5a5919d53d0">Weed::OCLEngine::binary_file_prefix</a></div><div class="ttdeci">static const std::string binary_file_prefix</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:384</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aa94d5413f3f1585d42ba00f11e139168"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aa94d5413f3f1585d42ba00f11e139168">Weed::OCLEngine::GetWeedDevice</a></div><div class="ttdeci">GpuDevicePtr GetWeedDevice(int64_t did=-1)</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:164</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aaac90f70045cc267c74dd93a95af113d"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aaac90f70045cc267c74dd93a95af113d">Weed::OCLEngine::GetDefaultDeviceID</a></div><div class="ttdeci">size_t GetDefaultDeviceID()</div><div class="ttdoc">Get default device ID.</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:314</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aacb633f61518be1805221ca78c488c84"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aacb633f61518be1805221ca78c488c84">Weed::OCLEngine::Instance</a></div><div class="ttdeci">static OCLEngine &amp; Instance()</div><div class="ttdoc">Get a pointer to the Instance of the singleton.</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:261</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aace5791e70369c69c57ef203d74e4d70"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aace5791e70369c69c57ef203d74e4d70">Weed::OCLEngine::SetDeviceContextPtrVector</a></div><div class="ttdeci">void SetDeviceContextPtrVector(std::vector&lt; DeviceContextPtr &gt; vec, DeviceContextPtr dcp=nullptr)</div><div class="ttdoc">Set the list of DeviceContextPtr object available for use.</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:152</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_aacfd9631f67daf8331623bfdba079a2f"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#aacfd9631f67daf8331623bfdba079a2f">Weed::OCLEngine::activeAllocSizes</a></div><div class="ttdeci">std::vector&lt; size_t &gt; activeAllocSizes</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:387</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_ab23763d37037d7d9b55d6fd45b7448b8"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#ab23763d37037d7d9b55d6fd45b7448b8">Weed::OCLEngine::binary_file_ext</a></div><div class="ttdeci">static const std::string binary_file_ext</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:385</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_ab29b8ae7da995a16985e45a3be263010"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#ab29b8ae7da995a16985e45a3be263010">Weed::OCLEngine::weed_gpu_devices</a></div><div class="ttdeci">std::map&lt; int64_t, GpuDevicePtr &gt; weed_gpu_devices</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:392</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_ac3f293b192d1ed1adf2895bab108e371"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#ac3f293b192d1ed1adf2895bab108e371">Weed::OCLEngine::SetDefaultDeviceContext</a></div><div class="ttdeci">void SetDefaultDeviceContext(DeviceContextPtr dcp)</div><div class="ttdoc">Pick a default device, for QEngineOCL instances that don't specify a preferred device.</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:160</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_ac9975cad91df2e6b894fc8d370b59c36"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#ac9975cad91df2e6b894fc8d370b59c36">Weed::OCLEngine::OCLEngine</a></div><div class="ttdeci">OCLEngine()</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:505</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_acc86091fae9dbd858596ffec35c6266c"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#acc86091fae9dbd858596ffec35c6266c">Weed::OCLEngine::GetActiveAllocSize</a></div><div class="ttdeci">size_t GetActiveAllocSize(const int64_t &amp;dev)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:321</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_acd47d9f4fe254e7e7400f3ddac078ab0"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#acd47d9f4fe254e7e7400f3ddac078ab0">Weed::OCLEngine::MakeProgram</a></div><div class="ttdeci">static cl::Program MakeProgram(bool buildFromSource, std::string path, std::shared_ptr&lt; OCLDeviceContext &gt; devCntxt)</div><div class="ttdoc">Make the program, from either source or binary.</div><div class="ttdef"><b>Definition:</b> oclengine.cpp:174</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_ae82f5048e75d86f7dd82d37d03b6a195"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#ae82f5048e75d86f7dd82d37d03b6a195">Weed::OCLEngine::allocMutex</a></div><div class="ttdeci">std::mutex allocMutex</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:389</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_af230aef9b246ac1d64c864354d5c7b68"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#af230aef9b246ac1d64c864354d5c7b68">Weed::OCLEngine::default_device_context</a></div><div class="ttdeci">DeviceContextPtr default_device_context</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:391</div></div>
<div class="ttc" id="aclassWeed_1_1OCLEngine_html_af90a483acd03c5dd5f9a451298e1fbb7"><div class="ttname"><a href="classWeed_1_1OCLEngine.html#af90a483acd03c5dd5f9a451298e1fbb7">Weed::OCLEngine::GetDefaultBinaryPath</a></div><div class="ttdeci">static std::string GetDefaultBinaryPath()</div><div class="ttdoc">Get default location for precompiled binaries:</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:266</div></div>
<div class="ttc" id="anamespaceWeed_html"><div class="ttname"><a href="namespaceWeed.html">Weed</a></div><div class="ttdef"><b>Definition:</b> adam.hpp:19</div></div>
<div class="ttc" id="anamespaceWeed_html_a361453848a3550886fd54260c88844cc"><div class="ttname"><a href="namespaceWeed.html#a361453848a3550886fd54260c88844cc">Weed::BufferPtr</a></div><div class="ttdeci">std::shared_ptr&lt; cl::Buffer &gt; BufferPtr</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:54</div></div>
<div class="ttc" id="anamespaceWeed_html_a719e68e523b6eb151e22baf601b508ca"><div class="ttname"><a href="namespaceWeed.html#a719e68e523b6eb151e22baf601b508ca">Weed::DeviceContextPtr</a></div><div class="ttdeci">std::shared_ptr&lt; OCLDeviceContext &gt; DeviceContextPtr</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:49</div></div>
<div class="ttc" id="anamespaceWeed_html_a763945c0387a761569473e447b9fa092"><div class="ttname"><a href="namespaceWeed.html#a763945c0387a761569473e447b9fa092">Weed::OCLAPI</a></div><div class="ttdeci">OCLAPI</div><div class="ttdef"><b>Definition:</b> oclapi.hpp:18</div></div>
<div class="ttc" id="anamespaceWeed_html_a763945c0387a761569473e447b9fa092aee6803dd25938d3b1265644c0d214880"><div class="ttname"><a href="namespaceWeed.html#a763945c0387a761569473e447b9fa092aee6803dd25938d3b1265644c0d214880">Weed::OCL_API_ADD_REAL</a></div><div class="ttdeci">@ OCL_API_ADD_REAL</div><div class="ttdef"><b>Definition:</b> oclapi.hpp:61</div></div>
<div class="ttc" id="anamespaceWeed_html_a9342a5e4326cfd6ce9f20370eed31054"><div class="ttname"><a href="namespaceWeed.html#a9342a5e4326cfd6ce9f20370eed31054">Weed::EventVec</a></div><div class="ttdeci">std::vector&lt; cl::Event &gt; EventVec</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:52</div></div>
<div class="ttc" id="anamespaceWeed_html_aba3553696fe966fee84085266dfbc490"><div class="ttname"><a href="namespaceWeed.html#aba3553696fe966fee84085266dfbc490">Weed::EventVecPtr</a></div><div class="ttdeci">std::shared_ptr&lt; EventVec &gt; EventVecPtr</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:53</div></div>
<div class="ttc" id="anamespaceWeed_html_ae977c8beeffd6e7346c184e609e0c858"><div class="ttname"><a href="namespaceWeed.html#ae977c8beeffd6e7346c184e609e0c858">Weed::GpuDevicePtr</a></div><div class="ttdeci">std::shared_ptr&lt; GpuDevice &gt; GpuDevicePtr</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:56</div></div>
<div class="ttc" id="aoclapi_8hpp_html"><div class="ttname"><a href="oclapi_8hpp.html">oclapi.hpp</a></div></div>
<div class="ttc" id="astructWeed_1_1GpuDevice_html"><div class="ttname"><a href="structWeed_1_1GpuDevice.html">Weed::GpuDevice</a></div><div class="ttdoc">Manages a GPU (or accelerator) device context, per discrete (or integrated) device,...</div><div class="ttdef"><b>Definition:</b> gpu_device.hpp:34</div></div>
<div class="ttc" id="astructWeed_1_1InitOClResult_html"><div class="ttname"><a href="structWeed_1_1InitOClResult.html">Weed::InitOClResult</a></div><div class="ttdef"><b>Definition:</b> oclengine.hpp:241</div></div>
<div class="ttc" id="astructWeed_1_1InitOClResult_html_a3f47ccf3c011eb5e9e390c834beb5664"><div class="ttname"><a href="structWeed_1_1InitOClResult.html#a3f47ccf3c011eb5e9e390c834beb5664">Weed::InitOClResult::all_dev_contexts</a></div><div class="ttdeci">std::vector&lt; DeviceContextPtr &gt; all_dev_contexts</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:242</div></div>
<div class="ttc" id="astructWeed_1_1InitOClResult_html_a5af328587b99a568586c90bf2ec5f89e"><div class="ttname"><a href="structWeed_1_1InitOClResult.html#a5af328587b99a568586c90bf2ec5f89e">Weed::InitOClResult::InitOClResult</a></div><div class="ttdeci">InitOClResult()</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:245</div></div>
<div class="ttc" id="astructWeed_1_1InitOClResult_html_a685837bca684676d6c473cbc18d96600"><div class="ttname"><a href="structWeed_1_1InitOClResult.html#a685837bca684676d6c473cbc18d96600">Weed::InitOClResult::InitOClResult</a></div><div class="ttdeci">InitOClResult(std::vector&lt; DeviceContextPtr &gt; adc, DeviceContextPtr ddc)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:249</div></div>
<div class="ttc" id="astructWeed_1_1InitOClResult_html_ab27fe2e85914fdc203a070c754ad9324"><div class="ttname"><a href="structWeed_1_1InitOClResult.html#ab27fe2e85914fdc203a070c754ad9324">Weed::InitOClResult::default_dev_context</a></div><div class="ttdeci">DeviceContextPtr default_dev_context</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:243</div></div>
<div class="ttc" id="astructWeed_1_1OCLKernelHandle_html"><div class="ttname"><a href="structWeed_1_1OCLKernelHandle.html">Weed::OCLKernelHandle</a></div><div class="ttdef"><b>Definition:</b> oclengine.hpp:59</div></div>
<div class="ttc" id="astructWeed_1_1OCLKernelHandle_html_a34033168c2c5ad7add490b68734e9ebe"><div class="ttname"><a href="structWeed_1_1OCLKernelHandle.html#a34033168c2c5ad7add490b68734e9ebe">Weed::OCLKernelHandle::OCLKernelHandle</a></div><div class="ttdeci">OCLKernelHandle(OCLAPI o, std::string kn)</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:63</div></div>
<div class="ttc" id="astructWeed_1_1OCLKernelHandle_html_aedce83b9e666997d3d5f5f315a238106"><div class="ttname"><a href="structWeed_1_1OCLKernelHandle.html#aedce83b9e666997d3d5f5f315a238106">Weed::OCLKernelHandle::kernelname</a></div><div class="ttdeci">std::string kernelname</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:61</div></div>
<div class="ttc" id="astructWeed_1_1OCLKernelHandle_html_af6203d7b687a51016bbb2483e379bc06"><div class="ttname"><a href="structWeed_1_1OCLKernelHandle.html#af6203d7b687a51016bbb2483e379bc06">Weed::OCLKernelHandle::oclapi</a></div><div class="ttdeci">OCLAPI oclapi</div><div class="ttdef"><b>Definition:</b> oclengine.hpp:60</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
